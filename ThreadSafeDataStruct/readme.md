### 线程安全的数据结构
- 红黑树（map，set）
- 数组（array、vector）
- 链表（list）

### 红黑树

```
    线程安全的红黑树保证什么？
        可重入成员函数。
    问题：析构时成员函数调用安全。
        析构等待成员函数调用结束，拒绝之后的成员函数调用。

        置空时（clear），遍历（迭代器持有），遍历时忽然遇到迭代器失效;但实际并不是失效，因为遍历的容器它就是在那一瞬间被遍历完了，虽然之后它又有类新元素，但从顺序上来说，你先完成遍历，之后它才加入。
            ，插入，发生在清理前，被清理掉是正常的。发生在清理后，没被清理掉是正常的。两个函数都进入执行，但都没有执行完，且并发，会有那种结果，并不保证。
            获取大小的处理，因为大小记录和指针维护是两个东西，所以没法一次完成。